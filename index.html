<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="A cute Valentine's Day page to ask someone to be your Valentine!">
  <meta name="theme-color" content="#ffd0e5">
  <meta property="og:title" content="Will you be my Valentine? üíï">
  <meta property="og:description" content="Someone has a special question for you‚Ä¶">
  <meta property="og:image" content="./images/image1.gif">
  <title>üíï Valentine's Day üíï</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Quicksand:wght@400;500;600;700&display=swap');

    * { box-sizing: border-box; }

    .gradient-background {
      background: linear-gradient(180deg, #ffd0e5 0%, #ffe8f2 36%, #ffffff 100%);
      min-height: 100vh;
      overflow-x: hidden;
      position: relative;
      font-family: 'Quicksand', sans-serif;
    }

    /* ===== Floating hearts background ===== */
    .floating-hearts {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 0;
      overflow: hidden;
    }
    .floating-hearts span {
      position: absolute;
      bottom: -40px;
      font-size: 1.2rem;
      opacity: 0;
      animation: rise 8s ease-in infinite;
    }
    .floating-hearts span:nth-child(1)  { left: 5%;  animation-delay: 0s;   font-size: 1.4rem; }
    .floating-hearts span:nth-child(2)  { left: 15%; animation-delay: 1.5s; font-size: 1rem;  }
    .floating-hearts span:nth-child(3)  { left: 25%; animation-delay: 3s;   font-size: 1.6rem; }
    .floating-hearts span:nth-child(4)  { left: 35%; animation-delay: 0.8s; font-size: 0.9rem; }
    .floating-hearts span:nth-child(5)  { left: 45%; animation-delay: 2.2s; font-size: 1.3rem; }
    .floating-hearts span:nth-child(6)  { left: 55%; animation-delay: 4s;   font-size: 1.1rem; }
    .floating-hearts span:nth-child(7)  { left: 65%; animation-delay: 1s;   font-size: 1.5rem; }
    .floating-hearts span:nth-child(8)  { left: 75%; animation-delay: 3.5s; font-size: 1rem;  }
    .floating-hearts span:nth-child(9)  { left: 85%; animation-delay: 2.8s; font-size: 1.2rem; }
    .floating-hearts span:nth-child(10) { left: 92%; animation-delay: 5s;   font-size: 1.4rem; }

    @keyframes rise {
      0%   { bottom: -40px; opacity: 0; transform: translateX(0) rotate(0deg); }
      10%  { opacity: 0.7; }
      50%  { opacity: 0.5; }
      100% { bottom: 110vh; opacity: 0; transform: translateX(60px) rotate(45deg); }
    }

    /* ===== Bounce for Yes button ===== */
    .bounce {
      animation: bounce 2s ease infinite;
    }
    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
      40% { transform: translateY(-20px); }
      60% { transform: translateY(-10px); }
    }

    /* ===== Shake for No button ===== */
    .shake {
      animation: shake 0.5s ease;
    }
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      20%  { transform: translateX(-8px) rotate(-2deg); }
      40%  { transform: translateX(8px) rotate(2deg); }
      60%  { transform: translateX(-6px) rotate(-1deg); }
      80%  { transform: translateX(6px) rotate(1deg); }
    }

    /* ===== Yes button glow ===== */
    .yes-glow {
      box-shadow: 0 0 12px rgba(34, 197, 94, 0.4);
      transition: all 0.3s ease;
    }
    .yes-glow:hover {
      box-shadow: 0 0 24px rgba(34, 197, 94, 0.7);
      transform: scale(1.04);
    }
    .yes-glow:active {
      transform: scale(0.96);
    }

    /* ===== Glassmorphism card ===== */
    .glass-card {
      background: rgba(255, 255, 255, 0.55);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      border: 1px solid rgba(255, 255, 255, 0.5);
      border-radius: 1.5rem;
      box-shadow: 0 8px 32px rgba(189, 30, 89, 0.10);
    }

    /* ===== Floating flower ===== */
    .float-animation {
      animation: float 4s ease-in-out infinite;
    }
    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50%      { transform: translateY(-12px); }
    }

    /* ===== Glow CTA button ===== */
    .glow-button {
      box-shadow: 0 0 0 0 rgba(236, 72, 153, 0.6);
      animation: glow-pulse 2s infinite;
    }
    @keyframes glow-pulse {
      0%   { box-shadow: 0 0 0 0 rgba(236, 72, 153, 0.6); }
      70%  { box-shadow: 0 0 22px 14px rgba(236, 72, 153, 0); }
      100% { box-shadow: 0 0 0 0 rgba(236, 72, 153, 0); }
    }

    /* ===== Fade-in sections ===== */
    .fade-in {
      animation: fadeIn 0.8s ease forwards;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(30px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    /* ===== Letter overlay ===== */
    .letter-overlay {
      position: fixed;
      inset: 0;
      z-index: 100;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(0, 0, 0, 0);
      transition: background 0.5s ease;
      pointer-events: none;
      opacity: 0;
    }
    .letter-overlay.active {
      background: rgba(0, 0, 0, 0.50);
      pointer-events: auto;
      opacity: 1;
    }

    /* ===== Flip book container ===== */
    .flip-book {
      width: min(92vw, 440px);
      aspect-ratio: 3 / 4;
      perspective: 1800px;
      position: relative;
      transform: scale(0.85);
      opacity: 0;
      transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.4s ease;
    }
    .letter-overlay.active .flip-book {
      transform: scale(1);
      opacity: 1;
    }

    /* ===== Back page (n·ªôi dung th∆∞, lu√¥n hi·ªán) ===== */
    .flip-back {
      position: absolute;
      inset: 0;
      border-radius: 4px 16px 16px 4px;
      padding: 32px 28px 28px;
      /* Paper texture */
      background: #fffaf5;
      background-image:
        repeating-linear-gradient(0deg, transparent, transparent 28px, rgba(236, 72, 153, 0.06) 28px, rgba(236, 72, 153, 0.06) 29px);
      box-shadow: 2px 4px 24px rgba(189, 30, 89, 0.12);
      /* Red margin line */
      border-left: 3px solid rgba(236, 72, 153, 0.18);
    }

    /* ===== Front page (b√¨a, l·∫≠t sang tr√°i) ===== */
    .flip-front {
      position: absolute;
      inset: 0;
      border-radius: 4px 16px 16px 4px;
      transform-origin: left center;
      transition: transform 1s cubic-bezier(0.4, 0, 0.2, 1);
      transform-style: preserve-3d;
      z-index: 2;
      cursor: pointer;
    }
    .flip-book.opened .flip-front {
      transform: rotateY(-180deg);
    }

    /* Front face of cover */
    .flip-front-face {
      position: absolute;
      inset: 0;
      backface-visibility: hidden;
      border-radius: 4px 16px 16px 4px;
      background: linear-gradient(135deg, #fce4ec 0%, #f8bbd0 40%, #f48fb1 100%);
      box-shadow: 4px 6px 28px rgba(189, 30, 89, 0.18);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 16px;
      padding: 32px;
      /* Decorative border */
      border: 2px solid rgba(255, 255, 255, 0.5);
    }
    /* Subtle fold line on cover */
    .flip-front-face::after {
      content: '';
      position: absolute;
      left: 0;
      top: 10%;
      bottom: 10%;
      width: 2px;
      background: linear-gradient(180deg, transparent 0%, rgba(189, 30, 89, 0.12) 30%, rgba(189, 30, 89, 0.12) 70%, transparent 100%);
    }

    /* Back face of cover (seen when flipped, darker) */
    .flip-front-back {
      position: absolute;
      inset: 0;
      backface-visibility: hidden;
      transform: rotateY(180deg);
      border-radius: 16px 4px 4px 16px;
      background: linear-gradient(135deg, #e8a0bf 0%, #d4789f 100%);
      box-shadow: -2px 4px 20px rgba(189, 30, 89, 0.10);
    }

    /* ===== Cover content ===== */
    .cover-emoji {
      font-size: 3.5rem;
      filter: drop-shadow(0 4px 8px rgba(236, 72, 153, 0.25));
      animation: float 3s ease-in-out infinite;
    }
    .cover-title {
      font-family: 'Dancing Script', cursive;
      font-size: 2rem;
      color: #ad1457;
      text-align: center;
      line-height: 1.3;
    }
    .cover-hint {
      font-size: 0.8rem;
      color: rgba(173, 20, 87, 0.5);
      letter-spacing: 0.08em;
      margin-top: 8px;
      animation: pulse-hint 2s ease-in-out infinite;
    }
    @keyframes pulse-hint {
      0%, 100% { opacity: 0.5; }
      50%      { opacity: 1; }
    }

    /* ===== Close button ===== */
    .letter-close {
      position: absolute;
      top: 8px;
      right: 10px;
      width: 32px;
      height: 32px;
      border-radius: 50%;
      border: none;
      background: rgba(236, 72, 153, 0.1);
      color: #ec4899;
      font-size: 1rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.2s, opacity 0.3s ease;
      z-index: 10;
      opacity: 0;
      pointer-events: none;
    }
    .flip-book.opened .letter-close {
      opacity: 1;
      pointer-events: auto;
      transition-delay: 0.8s;
    }
    .letter-close:hover {
      background: rgba(236, 72, 153, 0.25);
    }

    /* ===== Letter text stagger reveal ===== */
    .letter-content p {
      opacity: 0;
      transform: translateY(10px);
      transition: opacity 0.4s ease, transform 0.4s ease;
    }
    .flip-book.opened .letter-content p:nth-child(1) { opacity: 1; transform: translateY(0); transition-delay: 0.6s; }
    .flip-book.opened .letter-content p:nth-child(2) { opacity: 1; transform: translateY(0); transition-delay: 0.9s; }
    .flip-book.opened .letter-content p:nth-child(3) { opacity: 1; transform: translateY(0); transition-delay: 1.2s; }
    .flip-book.opened .letter-content p:nth-child(4) { opacity: 1; transform: translateY(0); transition-delay: 1.5s; }
    .flip-book.opened .letter-content p:nth-child(5) { opacity: 1; transform: translateY(0); transition-delay: 1.8s; }

    /* ===== Corner fold decoration ===== */
    .corner-fold {
      position: absolute;
      bottom: 0;
      right: 0;
      width: 40px;
      height: 40px;
      background: linear-gradient(135deg, transparent 50%, rgba(236, 72, 153, 0.08) 50%);
      border-radius: 0 0 16px 0;
    }

    /* ===== Language rows stagger ===== */
    .lang-row {
      opacity: 0;
      animation: fadeIn 0.5s ease forwards;
    }
    .lang-row:nth-child(1) { animation-delay: 0.2s; }
    .lang-row:nth-child(2) { animation-delay: 0.4s; }
    .lang-row:nth-child(3) { animation-delay: 0.6s; }
    .lang-row:nth-child(4) { animation-delay: 0.8s; }
    .lang-row:nth-child(5) { animation-delay: 1.0s; }

    /* ===== Dancing Script for headings ===== */
    .font-script { font-family: 'Dancing Script', cursive; }

    /* ===== Password screen ===== */
    .pw-screen {
      position: relative;
      z-index: 10;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      padding: 16px;
    }
    .pw-card {
      text-align: center;
      max-width: 400px;
      width: 100%;
    }
    .pw-input {
      width: 100%;
      padding: 14px 20px;
      border: 2px solid rgba(236, 72, 153, 0.3);
      border-radius: 9999px;
      background: rgba(255, 255, 255, 0.7);
      backdrop-filter: blur(8px);
      font-size: 1rem;
      font-family: 'Quicksand', sans-serif;
      color: #831843;
      outline: none;
      transition: border-color 0.3s, box-shadow 0.3s;
      text-align: center;
      letter-spacing: 0.15em;
    }
    .pw-input::placeholder {
      color: rgba(131, 24, 67, 0.35);
      letter-spacing: 0.05em;
    }
    .pw-input:focus {
      border-color: #ec4899;
      box-shadow: 0 0 0 4px rgba(236, 72, 153, 0.15);
    }
    .pw-input.error {
      border-color: #ef4444;
      animation: shake 0.5s ease;
    }
    .pw-error-msg {
      color: #ef4444;
      font-size: 0.85rem;
      margin-top: 8px;
      min-height: 1.2em;
    }
    .pw-lock {
      font-size: 4rem;
      margin-bottom: 8px;
      filter: drop-shadow(0 4px 12px rgba(236, 72, 153, 0.2));
    }
    .pw-heart-divider {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      margin: 12px 0;
    }
    .pw-heart-divider span {
      font-size: 0.6rem;
      color: #f9a8d4;
    }

    /* ===== Music controls ===== */
    .music-controls {
      position: fixed;
      bottom: 20px;
      left: 20px;
      z-index: 90;
      display: flex;
      gap: 8px;
    }
    .music-btn {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      border: none;
      background: rgba(255, 255, 255, 0.7);
      backdrop-filter: blur(10px);
      box-shadow: 0 4px 16px rgba(189, 30, 89, 0.12);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
      transition: transform 0.2s, background 0.2s;
    }
    .music-btn:hover {
      transform: scale(1.1);
      background: rgba(255, 255, 255, 0.9);
    }
    .music-btn:active {
      transform: scale(0.95);
    }
    .music-btn.playing {
      background: rgba(236, 72, 153, 0.15);
    }
    /* Spinning disc animation when playing */
    .spin {
      animation: spin-disc 3s linear infinite;
    }
    @keyframes spin-disc {
      from { transform: rotate(0deg); }
      to   { transform: rotate(360deg); }
    }

    /* ===== Back button ===== */
    .back-btn {
      position: absolute;
      top: 16px;
      left: 16px;
      z-index: 20;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      border: none;
      background: rgba(255, 255, 255, 0.6);
      backdrop-filter: blur(8px);
      box-shadow: 0 2px 12px rgba(189, 30, 89, 0.1);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.1rem;
      color: #be185d;
      transition: transform 0.2s, background 0.2s;
    }
    .back-btn:hover {
      transform: scale(1.1);
      background: rgba(255, 255, 255, 0.85);
    }
  </style>
  <!-- Preload images so transitions feel instant -->
  <link rel="preload" as="image" href="./images/image1.gif">
  <link rel="preload" as="image" href="./images/image2.gif">
  <link rel="preload" as="image" href="./images/image3.gif">
  <link rel="preload" as="image" href="./images/image4.gif">
  <link rel="preload" as="image" href="./images/image5.gif">
  <link rel="preload" as="image" href="./images/image6.gif">
  <link rel="preload" as="image" href="./images/image7.gif">
</head>
<body class="gradient-background">

  <!-- Floating hearts background decoration -->
  <div class="floating-hearts" aria-hidden="true">
    <span>üíï</span><span>üíó</span><span>üíñ</span><span>ü©∑</span><span>üíò</span>
    <span>üíù</span><span>‚ù§Ô∏è</span><span>üíì</span><span>üå∏</span><span>üíû</span>
  </div>

  <!-- ==================== PH·∫¶N 0: M√ÄN H√åNH NH·∫¨P PASSWORD ==================== -->
  <div id="passwordScreen" class="pw-screen">
    <div class="pw-card glass-card p-8 md:p-10">
      <div class="pw-lock">üîí</div>
      <h1 class="font-script text-3xl md:text-4xl font-bold text-[#bd1e59] mb-2">
        C√≥ g√¨ ƒë√≥ d√†nh cho c·∫≠u‚Ä¶
      </h1>
      <div class="pw-heart-divider">
        <span>üíó</span><span>üíó</span><span>üíó</span><span>üíó</span><span>üíó</span>
      </div>
      <p class="text-pink-400 text-sm mb-6 italic">
        Nh·∫≠p m·∫≠t kh·∫©u ƒë·ªÉ m·ªü ü§´
      </p>
      <input
        id="pwInput"
        type="password"
        class="pw-input"
        placeholder="‚óè ‚óè ‚óè ‚óè ‚óè ‚óè ‚óè ‚óè"
        autocomplete="off"
      />
      <p id="pwError" class="pw-error-msg"></p>
      <button
        id="pwSubmit"
        class="mt-4 inline-flex items-center gap-2 px-8 py-3 rounded-full bg-pink-500 text-white text-lg font-semibold shadow-lg hover:bg-pink-400 hover:scale-105 active:scale-95 transition-all duration-300 cursor-pointer"
      >
        M·ªü kh√≥a üíï
      </button>
    </div>
  </div>

  <!-- Music controls (·∫©n cho t·ªõi khi qua password) -->
  <div id="musicControls" class="music-controls" style="display:none;">
    <button id="musicToggle" class="music-btn" title="B·∫≠t/T·∫Øt nh·∫°c">
      <span id="musicIcon">üéµ</span>
    </button>
    <button id="volumeToggle" class="music-btn" title="B·∫≠t/T·∫Øt ti·∫øng">
      <span id="volumeIcon">üîä</span>
    </button>
  </div>

  <!-- Audio element (d√πng nh·∫°c mi·ªÖn ph√≠, b·∫°n ƒë·ªïi src th√†nh file nh·∫°c c·ªßa b·∫°n) -->
  <audio id="bgMusic" loop preload="auto">
    <source src="./forya.mp3" type="audio/mpeg">
  </audio>

  <main id="mainContent" class="relative z-10 flex items-center justify-center min-h-screen px-4 py-8" style="display:none;">

    <!-- ==================== PH·∫¶N 1: C√ÇU H·ªéI ==================== -->
    <section id="questionSection" class="flex flex-col items-center p-6 md:p-10 glass-card max-w-md w-full relative">
      <img
        id="imageDisplay"
        src="./images/image1.gif"
        alt="Cute kitten with flowers"
        class="rounded-2xl h-[280px] object-cover shadow-lg"
      />
      <h1 id="valentineQuestion" class="font-script text-4xl md:text-5xl font-bold text-[#bd1e59] mt-6 mb-1 text-center">
        Will you be my Valentine?
      </h1>
      <p id="subText" class="text-sm text-pink-400 italic mb-4 text-center">
        (ƒê·ª´ng c·ªë b·∫•m No nhi·ªÅu nha üò§)
      </p>
      <div id="responseButtons" class="flex gap-4 pt-3 items-center flex-wrap justify-center">
        <button
          id="yesButton"
          class="bounce yes-glow inline-flex items-center justify-center rounded-full text-xl font-semibold cursor-pointer px-6 py-3 bg-green-500 text-white transition-all duration-300 ease-in-out hover:bg-green-400 overflow-hidden"
          style="min-height:48px; min-width:80px;"
        >
          Yes üíñ
        </button>
        <button
          id="noButton"
          class="shake-target inline-flex items-center justify-center rounded-full text-xl font-semibold cursor-pointer px-6 py-3 bg-red-500 text-white transition-colors hover:bg-red-700 overflow-hidden"
          style="min-height:48px; min-width:80px;"
        >
          No
        </button>
      </div>
    </section>

    <!-- ==================== PH·∫¶N 2: CARD HOA + L·ªúI THO·∫†I (sau khi Yes) ==================== -->
    <section id="resultSection" class="hidden w-full max-w-4xl fade-in">
      <div class="relative overflow-hidden glass-card px-6 pt-12 pb-8 md:px-10 md:pt-14 md:pb-10">
        <!-- Back button -->
        <button id="backToQuestion" class="back-btn" title="Quay l·∫°i">‚Üê</button>
        <!-- Soft blobs -->
        <div class="pointer-events-none absolute -left-10 -top-10 h-32 w-32 rounded-full bg-pink-200/50 blur-3xl"></div>
        <div class="pointer-events-none absolute -right-10 -bottom-10 h-36 w-36 rounded-full bg-rose-200/50 blur-3xl"></div>

        <!-- Header -->
        <div class="text-center mb-10">
          <h2 class="font-script text-4xl md:text-5xl font-bold text-pink-600 leading-snug">
            This is for you ü•∞üòÅ
          </h2>
          <div class="flex items-center justify-center gap-2 mt-3">
            <span class="h-[2px] w-12 bg-pink-300 rounded-full"></span>
            <span class="text-pink-400">üíó</span>
            <span class="h-[2px] w-12 bg-pink-300 rounded-full"></span>
          </div>
        </div>

        <div class="grid md:grid-cols-2 gap-8 items-center">
          <!-- ·∫¢nh b√≥ hoa -->
          <div class="flex justify-center">
            <div class="rounded-3xl bg-pink-50/80 p-5 md:p-6 shadow-inner">
              <img
                id="flowerImage"
                src="./images/hoa1.png"
                alt="A bouquet of flowers just for you"
                class="max-h-96 w-auto object-contain float-animation rounded-2xl"
              />
            </div>
          </div>

          <!-- L·ªùi tho·∫°i nhi·ªÅu ng√¥n ng·ªØ -->
          <div class="space-y-3">
            <div class="lang-row rounded-2xl bg-pink-100/80 px-5 py-3 text-center">
              <span class="text-[10px] font-bold tracking-widest text-pink-400 uppercase block">English</span>
              <span class="text-lg font-semibold text-pink-800">I Love You</span>
            </div>
            <div class="lang-row rounded-2xl bg-pink-100/80 px-5 py-3 text-center">
              <span class="text-[10px] font-bold tracking-widest text-pink-400 uppercase block">Vietnamese</span>
              <span class="text-lg font-semibold text-pink-800">Anh y√™u em</span>
            </div>
            <div class="lang-row rounded-2xl bg-pink-100/80 px-5 py-3 text-center">
              <span class="text-[10px] font-bold tracking-widest text-pink-400 uppercase block">Chinese</span>
              <span class="text-lg font-semibold text-pink-800 italic">W«í √†i n«ê</span>
            </div>
            <div class="lang-row rounded-2xl bg-pink-100/80 px-5 py-3 text-center">
              <span class="text-[10px] font-bold tracking-widest text-pink-400 uppercase block">Russian</span>
              <span class="text-lg font-semibold text-pink-800 italic">Ya lyublyu tebya</span>
            </div>
            <div class="lang-row rounded-2xl bg-pink-100/80 px-5 py-3 text-center">
              <span class="text-[10px] font-bold tracking-widest text-pink-400 uppercase block">Secret Language</span>
              <span class="text-lg font-semibold text-pink-800">It's always you üíò</span>
            </div>
          </div>
        </div>

        <!-- N√∫t m·ªü l√° th∆∞ -->
        <div class="mt-10 text-center">
          <button
            id="openLetterButton"
            class="glow-button inline-flex items-center gap-2 px-8 py-3.5 rounded-full bg-pink-500 text-white text-lg font-semibold shadow-lg hover:bg-pink-400 hover:scale-105 active:scale-95 transition-all duration-300 cursor-pointer"
          >
            <span>M·ªü l√° th∆∞</span>
            <span class="text-xl">üíå</span>
          </button>
        </div>

      </div>
    </section>

  </main>

  <!-- ==================== PH·∫¶N 3: L·∫¨T TH∆Ø OVERLAY ==================== -->
  <div id="letterOverlay" class="letter-overlay">
    <div id="flipBook" class="flip-book">

      <!-- Trang sau = n·ªôi dung th∆∞ (lu√¥n n·∫±m ƒë√≥) -->
      <div class="flip-back">
        <button id="letterCloseBtn" class="letter-close" aria-label="ƒê√≥ng l√° th∆∞">‚úï</button>
        <div class="letter-content">
          <p class="text-pink-800 leading-relaxed mb-2 font-script text-2xl">
            G·ª≠i c·∫≠u,
          </p>
          <p class="text-pink-800 text-[15px] leading-relaxed mb-2">
            C·∫£m ∆°n Baobei v√¨ ƒë√£ ƒë·ªìng √Ω l√†m Valentine c·ªßa t·ªõ. T·ª´ l√∫c g·∫∑p Baobei, m·ªçi th·ª© ƒë·ªÅu tr·ªü n√™n d·ªãu d√†ng h∆°n r·∫•t nhi·ªÅu.
          </p>
          <p class="text-pink-800 text-[15px] leading-relaxed mb-2">
            T·ªõ kh√¥ng c·∫ßn ƒëi·ªÅu g√¨ qu√° l·ªõn lao, ch·ªâ c·∫ßn ƒë∆∞·ª£c ·ªü c·∫°nh Baobei ‚Äî c√πng c∆∞·ªùi, c√πng n√≥i, c√πng l√†m nh·ªØng ƒëi·ªÅu nh·ªè nh·∫∑t nh∆∞ng l·∫°i l√†m t·ªõ nh·ªõ ho√†i.
          </p>
          <p class="text-pink-800 text-[15px] leading-relaxed mb-2">
            H√¥m nay, t·ªõ kh√¥ng ch·ªâ mu·ªën n√≥i "Em l√† c·ªßa t√¥i!!!", m√† c√≤n l√† "C·∫£m ∆°n Baobei v√¨ ƒë√£ l√† ch√≠nh Baobei".
          </p>
          <p class="text-pink-700 text-[15px] leading-relaxed mt-4 font-semibold font-script text-lg">
            ‚Äî K√Ω t√™n: ng∆∞·ªùi ƒëang m·ªâm c∆∞·ªùi v√¨ c√¢u tr·∫£ l·ªùi "Yes" c·ªßa Baobei üíó
          </p>
        </div>
        <div class="corner-fold"></div>
      </div>

      <!-- Trang tr∆∞·ªõc = b√¨a th∆∞ (l·∫≠t sang tr√°i khi m·ªü) -->
      <div id="flipFront" class="flip-front">
        <!-- M·∫∑t tr∆∞·ªõc b√¨a -->
        <div class="flip-front-face">
          <div class="cover-emoji">üíå</div>
          <div class="cover-title">D√†nh cho Baobei‚Ä¶</div>
          <div class="cover-hint">nh·∫•n ƒë·ªÉ m·ªü ‚ú®</div>
        </div>
        <!-- M·∫∑t sau b√¨a (th·∫•y khi l·∫≠t) -->
        <div class="flip-front-back"></div>
      </div>

    </div>
  </div>

  <script>
    (() => {
      /* ===================================================
         PASSWORD
      =================================================== */
      const PASSWORD = '02052000'; // <-- ƒê·ªîI M·∫¨T KH·∫®U T·∫†I ƒê√ÇY

      const pwScreen     = document.getElementById('passwordScreen');
      const pwInput      = document.getElementById('pwInput');
      const pwSubmit     = document.getElementById('pwSubmit');
      const pwError      = document.getElementById('pwError');
      const mainContent  = document.getElementById('mainContent');
      const musicControls = document.getElementById('musicControls');

      const unlockSite = () => {
        const val = pwInput.value.trim();
        if (val === PASSWORD) {
          pwScreen.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
          pwScreen.style.opacity = '0';
          pwScreen.style.transform = 'scale(0.95)';
          setTimeout(() => {
            pwScreen.style.display = 'none';
            mainContent.style.display = '';
            musicControls.style.display = '';
            // Auto-play music on unlock
            bgMusic.play().catch(() => {});
            isPlaying = true;
            musicIcon.textContent = 'üéµ';
            musicIcon.classList.add('spin');
          }, 500);
        } else {
          pwInput.classList.add('error');
          pwError.textContent = 'Sai m·∫≠t kh·∫©u r·ªìi, th·ª≠ l·∫°i nha üòÖ';
          setTimeout(() => {
            pwInput.classList.remove('error');
          }, 600);
        }
      };

      pwSubmit.addEventListener('click', unlockSite);
      pwInput.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') unlockSite();
        pwError.textContent = ''; // clear error on type
      });

      /* ===================================================
         MUSIC
      =================================================== */
      const bgMusic      = document.getElementById('bgMusic');
      const musicToggle  = document.getElementById('musicToggle');
      const musicIcon    = document.getElementById('musicIcon');
      const volumeToggle = document.getElementById('volumeToggle');
      const volumeIcon   = document.getElementById('volumeIcon');

      let isPlaying = false;
      let isMuted   = false;

      musicToggle.addEventListener('click', () => {
        if (isPlaying) {
          bgMusic.pause();
          musicIcon.textContent = 'üéµ';
          musicIcon.classList.remove('spin');
          musicToggle.classList.remove('playing');
        } else {
          bgMusic.play().catch(() => {});
          musicIcon.textContent = 'üéµ';
          musicIcon.classList.add('spin');
          musicToggle.classList.add('playing');
        }
        isPlaying = !isPlaying;
      });

      volumeToggle.addEventListener('click', () => {
        isMuted = !isMuted;
        bgMusic.muted = isMuted;
        volumeIcon.textContent = isMuted ? 'üîá' : 'üîä';
      });

      /* ===================================================
         DOM REFERENCES
      =================================================== */
      const yesButton         = document.getElementById('yesButton');
      const noButton          = document.getElementById('noButton');
      const imageDisplay      = document.getElementById('imageDisplay');
      const valentineQuestion = document.getElementById('valentineQuestion');
      const responseButtons   = document.getElementById('responseButtons');
      const subText           = document.getElementById('subText');

      const questionSection  = document.getElementById('questionSection');
      const resultSection    = document.getElementById('resultSection');
      const openLetterButton = document.getElementById('openLetterButton');
      const backToQuestion   = document.getElementById('backToQuestion');

      // Letter flip elements
      const letterOverlay = document.getElementById('letterOverlay');
      const flipBook      = document.getElementById('flipBook');
      const flipFront     = document.getElementById('flipFront');
      const letterCloseBtn = document.getElementById('letterCloseBtn');

      /* ===================================================
         CONFIGURATION
      =================================================== */
      const GROWTH_PER_CLICK = 20;
      const FONT_GROWTH_PER_CLICK = 8;
      const MAX_NO_CLICKS = 5;

      const IMAGE_PATHS = [
        './images/image1.gif',
        './images/image2.gif',
        './images/image3.gif',
        './images/image4.gif',
        './images/image5.gif',
        './images/image6.gif',
        './images/image7.gif',
      ];

      const NO_BUTTON_MESSAGES = [
        'No',
        'Are you sure?',
        'Pookie please',
        "Don't do this to me :(",
        "You're breaking my heart üíî",
        "Ok fine‚Ä¶ click Yes ƒëi ü•∫",
      ];

      const SUB_TEXTS = [
        '(ƒê·ª´ng c·ªë b·∫•m No nhi·ªÅu nha üò§)',
        '(Nghƒ© l·∫°i ƒëi m√†‚Ä¶)',
        '(T·ªõ bi·∫øt Baobei mu·ªën b·∫•m Yes m√† ü´£)',
        '(ƒê·ª´ng l√†m t·ªõ bu·ªìn‚Ä¶)',
        '(Dino n·ª° l√≤ng n√†o‚Ä¶? üò¢)',
        '(NƒÉnn n·ªâ m√≤aaa, b·∫•m Yes ƒëi ü•∫)',
      ];

      const ALT_TEXTS = [
        'Cute kitten with flowers',
        'Sad kitten looking up',
        'Kitten begging',
        'Heartbroken kitten',
        'Crying kitten',
        'Devastated kitten',
        'Happy kitten celebrating',
      ];

      /* ===================================================
         YES / NO LOGIC
      =================================================== */
      let noClickCount = 0;
      let padX = 24;
      let padY = 12;
      let fontSize = 20;

      noButton.addEventListener('click', () => {
        if (noClickCount >= MAX_NO_CLICKS) return;
        noClickCount++;

        noButton.classList.remove('shake');
        void noButton.offsetWidth;
        noButton.classList.add('shake');

        imageDisplay.src = IMAGE_PATHS[noClickCount];
        imageDisplay.alt = ALT_TEXTS[noClickCount];
        subText.textContent = SUB_TEXTS[noClickCount];

        padX = Math.min(padX + GROWTH_PER_CLICK, 64);
        padY = Math.min(padY + GROWTH_PER_CLICK * 0.5, 32);
        fontSize = Math.min(fontSize + FONT_GROWTH_PER_CLICK, 48);

        yesButton.style.padding = `${padY}px ${padX}px`;
        yesButton.style.fontSize = `${fontSize}px`;
        noButton.textContent = NO_BUTTON_MESSAGES[noClickCount];
      });

      /* ===================================================
         CONFETTI
      =================================================== */
      const fireConfetti = () => {
        const heart = confetti.shapeFromPath({
          path: 'M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z',
        });
        const defaults = {
          spread: 360, ticks: 100, gravity: 0, decay: 0.94,
          startVelocity: 20, shapes: [heart],
          colors: ['#ff69b4', '#ff1493', '#ff6b81', '#e84393'],
        };
        confetti({ ...defaults, particleCount: 50, scalar: 2 });
        confetti({ ...defaults, particleCount: 25, scalar: 3 });
        confetti({ ...defaults, particleCount: 10, scalar: 4 });
      };

      /* ===================================================
         YES ‚Üí SHOW RESULT
      =================================================== */
      yesButton.addEventListener('click', () => {
        fireConfetti();
        questionSection.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
        questionSection.style.opacity = '0';
        questionSection.style.transform = 'scale(0.95)';

        setTimeout(() => {
          questionSection.classList.add('hidden');
          questionSection.style.opacity = '';
          questionSection.style.transform = '';
          resultSection.classList.remove('hidden');
          window.scrollTo({ top: 0, behavior: 'smooth' });
          setTimeout(fireConfetti, 600);
        }, 500);
      });

      /* ===================================================
         BACK BUTTON: result ‚Üí question
      =================================================== */
      backToQuestion.addEventListener('click', () => {
        resultSection.style.transition = 'opacity 0.4s ease';
        resultSection.style.opacity = '0';

        setTimeout(() => {
          resultSection.classList.add('hidden');
          resultSection.style.opacity = '';

          // Reset question state
          noClickCount = 0;
          padX = 24; padY = 12; fontSize = 20;
          yesButton.style.padding = '';
          yesButton.style.fontSize = '';
          noButton.textContent = 'No';
          subText.textContent = SUB_TEXTS[0];
          imageDisplay.src = IMAGE_PATHS[0];
          imageDisplay.alt = ALT_TEXTS[0];
          responseButtons.style.display = '';
          valentineQuestion.textContent = 'Will you be my Valentine?';

          questionSection.classList.remove('hidden');
          window.scrollTo({ top: 0, behavior: 'smooth' });
        }, 400);
      });

      /* ===================================================
         LETTER FLIP
      =================================================== */
      const showLetter = () => {
        flipBook.classList.remove('opened');
        letterOverlay.classList.add('active');
      };
      const flipOpen = () => flipBook.classList.add('opened');
      const closeLetter = () => {
        flipBook.classList.remove('opened');
        setTimeout(() => letterOverlay.classList.remove('active'), 800);
      };

      openLetterButton.addEventListener('click', showLetter);
      flipFront.addEventListener('click', flipOpen);
      letterCloseBtn.addEventListener('click', closeLetter);
      letterOverlay.addEventListener('click', (e) => {
        if (e.target === letterOverlay) closeLetter();
      });
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && letterOverlay.classList.contains('active')) closeLetter();
      });
    })();
  </script>
</body>
</html>
